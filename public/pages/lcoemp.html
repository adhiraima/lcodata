<!DOCTYPE html>
<html>
    <head>
        <title>Loading content with AJAX</title>
        <meta charset="utf-8">
        <script src="../javascripts/jquery-2.1.1.min.js"></script>
        <script>
        $(document).ready(function() {
        	function getParameterByName(name) {
			    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
			    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
			        results = regex.exec(location.search);
			    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
			}
			$.ajax({
		        type: 'GET',
		        url: '/api/employee/'+getParameterByName('employeeId'),
		        dataType: "json",
		        //async:false,
		        success: function(data) {
		        	$('#employeeId').val(data.employeeId);
		        	$('#employeeName').val(data.name);
		        	$('#employeeEmail').val(data.email);
		        	$("#addHref").attr("href", "add.html?employeeId="+$('#employeeId').val());
		        }
		    });
		    $.ajax({
		        type: 'GET',
		        url: '/api/list/'+getParameterByName('employeeId'),
		        dataType: "json",
		        //async:false,
		        success: function(data) {
		            console.log(">>>>>>"+data);
		            var searchResults = $('#searchResults tbody');
		            $(searchResults).empty();
		            for (var i = 0; i < data.length; i++) {
		               var html = "<tr>"
						  	+"<td>" 
						  	+ data[i].serialNumber 
						  	+ "</td><td>" 
						  	+ data[i].lcoName 
						  	+ "</td>"
						  	+"<td><a href=\"edit.html?lcoCode="+data[i].lcoCode+"\" >" 
						  	+ data[i].lcoCode 
						  	+ "</a></td><td>" 
						  	+ data[i].address 
						  	+ "</td>"
						  	+"<td>" 
						  	+ data[i].jvCode 
						  	+ "</td><td>" 
						  	+ data[i].jvName 
						  	+ "</td>"
						  	+"<td>" 
						  	+ data[i].city 
						  	+ "</td><td>" 
						  	+ data[i].state 
						  	+ "</td>"
						  	+"<td>" 
						  	+ data[i].aopLocation 
						  	+ "</td><td>" 
						  	+ data[i].pincode 
						  	+ "</td>"
						  	+"<td>" 
						  	+ data[i].phone 
						  	+ "</td><td>" 
						  	+ data[i].parentCode 
						  	+ "</td>"
						  	+"<td>" 
						  	+ data[i].area 
						  	+ "</td><td>" 
						  	+ data[i].dealerTypeId 
						  	+ "</td>"
						  	+"<td>" 
						  	+ data[i].oldAopLocation 
						  	+ "</td><td>" 
						  	+ data[i].employeeId 
						  	+ "</td>"
						  	+"<td>" 
						  	+ data[i].agreementId 
						  	+ "</td><td>" 
						  	+ data[i].kycId 
						  	+ "</td>"	
						  	+"</tr>";
						
						$(searchResults).append(html);
						
		            }
		        }
		
		    });
		});
    </script>
         
    </head>
    <body>
        <a class="offline-button" href="../index.html">Back</a>
        <a class="offline-button" id="addHref" href="">Add LCO</a></br></br>
        Employee Id: <input type="text" name="employeeId" id="employeeId" readonly></br>
        Employee Name: <input type="text" name="employeeName" id="employeeName" readonly></br>
        Employee Email: <input type="text" name="employeeEmail" id="employeeEmail" readonly>
        </br></br>
        <table id="searchResults" border="1px">
        	<thead>
	        	<tr>
	        		<td>serialNumber</td>
	        		<td>lcoName</td>
	        		<td>lcoCode</td>
	        		<td>address</td>
	        		<td>jvCode</td>
	        		<td>jvName</td>
	        		<td>city</td>
	        		<td>state</td>
	        		<td>aopLocation</td>
	        		<td>pincode</td>
	        		<td>phone</td>
	        		<td>parentCode</td>
	        		<td>area</td>
	        		<td>dealerTypeId</td>
	        		<td>oldAopLocation</td>
	        		<td>employeeId</td>
	        		<td>agreementId</td>
	        		<td>kycId</td>
	        	</tr>
        	</thead>
        	<tbody>
        	</tbody>
        </table>
    </body>
</html>
